/*!
 * v-viewer v3.0.10
 * https://github.com/mirari/v-viewer#readme
 *
 * Copyright 2021 mirari
 * Released under the MIT license
 *
 * Date: 2021-09-21T05:13:15.278Z
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("viewerjs"),require("vue")):"function"==typeof define&&define.amd?define(["exports","viewerjs","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueViewer={},e.Viewer,e.Vue)}(this,(function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(t),i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var u=function(e){return e};var c=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},a=Math.max;var f=function(e,t,r){return t=a(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=a(n.length-t,0),u=Array(i);++o<i;)u[o]=n[t+o];o=-1;for(var f=Array(t+1);++o<t;)f[o]=n[o];return f[t]=r(u),c(e,this,f)}};var s=function(e){return function(){return e}},l="object"==typeof i&&i&&i.Object===Object&&i,d=l,p="object"==typeof self&&self&&self.Object===Object&&self,v=d||p||Function("return this")(),b=v.Symbol,y=b,w=Object.prototype,g=w.hasOwnProperty,h=w.toString,j=y?y.toStringTag:void 0;var m=function(e){var t=g.call(e,j),r=e[j];try{e[j]=void 0;var n=!0}catch(i){}var o=h.call(e);return n&&(t?e[j]=r:delete e[j]),o},O=Object.prototype.toString;var _=m,x=function(e){return O.call(e)},T=b?b.toStringTag:void 0;var $=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":T&&T in Object(e)?_(e):x(e)};var A=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},S=$,E=A;var I,M=function(e){if(!E(e))return!1;var t=S(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},V=v["__core-js_shared__"],P=(I=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"";var k=function(e){return!!P&&P in e},D=Function.prototype.toString;var U=M,F=k,C=A,B=function(e){if(null!=e){try{return D.call(e)}catch(t){}try{return e+""}catch(t){}}return""},W=/^\[object .+?Constructor\]$/,N=Function.prototype,R=Object.prototype,q=N.toString,L=R.hasOwnProperty,z=RegExp("^"+q.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var G=function(e){return!(!C(e)||F(e))&&(U(e)?z:W).test(B(e))},H=function(e,t){return null==e?void 0:e[t]};var K=function(e,t){var r=H(e,t);return G(r)?r:void 0},J=function(){try{var e=K(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Q=s,X=J,Y=X?function(e,t){return X(e,"toString",{configurable:!0,enumerable:!1,value:Q(t),writable:!0})}:u,Z=Date.now;var ee=function(e){var t=0,r=0;return function(){var n=Z(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Y),te=u,re=f,ne=ee;var oe=function(e,t){return ne(re(e,t,te),e+"")};var ie=function(e,t){return e===t||e!=e&&t!=t};var ue=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},ce=M,ae=ue;var fe=function(e){return null!=e&&ae(e.length)&&!ce(e)},se=/^(?:0|[1-9]\d*)$/;var le=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&se.test(e))&&e>-1&&e%1==0&&e<t},de=ie,pe=fe,ve=le,be=A;var ye=function(e,t,r){if(!be(r))return!1;var n=typeof t;return!!("number"==n?pe(r)&&ve(t,r.length):"string"==n&&t in r)&&de(r[t],e)};var we=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var ge=function(e){return null!=e&&"object"==typeof e},he=$,je=ge;var me,Oe,_e,xe,Te,$e,Ae,Se,Ee=function(e){return je(e)&&"[object Arguments]"==he(e)},Ie=ge,Me=Object.prototype,Ve=Me.hasOwnProperty,Pe=Me.propertyIsEnumerable,ke=Ee(function(){return arguments}())?Ee:function(e){return Ie(e)&&Ve.call(e,"callee")&&!Pe.call(e,"callee")},De=Array.isArray,Ue={exports:{}};me=Ue,_e=v,xe=function(){return!1},Te=(Oe=Ue.exports)&&!Oe.nodeType&&Oe,$e=Te&&me&&!me.nodeType&&me,Ae=$e&&$e.exports===Te?_e.Buffer:void 0,Se=(Ae?Ae.isBuffer:void 0)||xe,me.exports=Se;var Fe=$,Ce=ue,Be=ge,We={};We["[object Float32Array]"]=We["[object Float64Array]"]=We["[object Int8Array]"]=We["[object Int16Array]"]=We["[object Int32Array]"]=We["[object Uint8Array]"]=We["[object Uint8ClampedArray]"]=We["[object Uint16Array]"]=We["[object Uint32Array]"]=!0,We["[object Arguments]"]=We["[object Array]"]=We["[object ArrayBuffer]"]=We["[object Boolean]"]=We["[object DataView]"]=We["[object Date]"]=We["[object Error]"]=We["[object Function]"]=We["[object Map]"]=We["[object Number]"]=We["[object Object]"]=We["[object RegExp]"]=We["[object Set]"]=We["[object String]"]=We["[object WeakMap]"]=!1;var Ne=function(e){return Be(e)&&Ce(e.length)&&!!We[Fe(e)]};var Re=function(e){return function(t){return e(t)}},qe={exports:{}};!function(e,t){var r=l,n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,i=o&&o.exports===n&&r.process,u=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=u}(qe,qe.exports);var Le=Ne,ze=Re,Ge=qe.exports,He=Ge&&Ge.isTypedArray,Ke=He?ze(He):Le,Je=we,Qe=ke,Xe=De,Ye=Ue.exports,Ze=le,et=Ke,tt=Object.prototype.hasOwnProperty;var rt=function(e,t){var r=Xe(e),n=!r&&Qe(e),o=!r&&!n&&Ye(e),i=!r&&!n&&!o&&et(e),u=r||n||o||i,c=u?Je(e.length,String):[],a=c.length;for(var f in e)!t&&!tt.call(e,f)||u&&("length"==f||o&&("offset"==f||"parent"==f)||i&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Ze(f,a))||c.push(f);return c},nt=Object.prototype;var ot=A,it=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||nt)},ut=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},ct=Object.prototype.hasOwnProperty;var at=rt,ft=function(e){if(!ot(e))return ut(e);var t=it(e),r=[];for(var n in e)("constructor"!=n||!t&&ct.call(e,n))&&r.push(n);return r},st=fe;var lt=oe,dt=ie,pt=ye,vt=function(e){return st(e)?at(e,!0):ft(e)},bt=Object.prototype,yt=bt.hasOwnProperty,wt=lt((function(e,t){e=Object(e);var r=-1,n=t.length,o=n>2?t[2]:void 0;for(o&&pt(t[0],t[1],o)&&(n=1);++r<n;)for(var i=t[r],u=vt(i),c=-1,a=u.length;++c<a;){var f=u[c],s=e[f];(void 0===s||dt(s,bt[f])&&!yt.call(e,f))&&(e[f]=i[f])}return e}));const gt="undefined"!=typeof window&&null!==window;!function(){if(gt&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)return"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0}();const ht=Object.prototype.propertyIsEnumerable,jt=Object.getOwnPropertySymbols;function mt(e){return"function"==typeof e||"[object Object]"===toString.call(e)}function Ot(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}function _t(e,...t){if(!mt(e))throw new TypeError("expected the first argument to be an object");if(0===t.length||"function"!=typeof Symbol||"function"!=typeof jt)return e;for(const r of t){const t=jt(r);for(const n of t)ht.call(r,n)&&(e[n]=r[n])}return e}function xt(e,...t){let r=0;var n;for(("object"==typeof(n=e)?null===n:"function"!=typeof n)&&(e=t[r++]),e||(e={});r<t.length;r++)if(mt(t[r])){for(const n of Object.keys(t[r]))Ot(n)&&(mt(e[n])&&mt(t[r][n])?xt(e[n],t[r][n]):e[n]=t[r][n]);_t(e,t[r])}return e}const Tt=({images:e=[],options:t})=>{t=xt(t,{inline:!1});const n=document.createElement("div"),i=r.h("div",{style:{display:"none"},class:["__viewer-token"]},e.map((e=>r.h("img","string"==typeof e?{src:e}:e))));r.render(i,n);const u=n.firstElementChild;document.body.appendChild(u);const c=new o.default(u,t),a=c.destroy.bind(c);return c.destroy=function(){return a(),r.render(null,n),c},c.show(),u.addEventListener("hidden",(function(){this.viewer===c&&c.destroy()})),c};var $t=v,At=/\s/;var St=function(e){for(var t=e.length;t--&&At.test(e.charAt(t)););return t},Et=/^\s+/;var It=$,Mt=ge;var Vt=function(e){return e?e.slice(0,St(e)+1).replace(Et,""):e},Pt=A,kt=function(e){return"symbol"==typeof e||Mt(e)&&"[object Symbol]"==It(e)},Dt=/^[-+]0x[0-9a-f]+$/i,Ut=/^0b[01]+$/i,Ft=/^0o[0-7]+$/i,Ct=parseInt;var Bt=A,Wt=function(){return $t.Date.now()},Nt=function(e){if("number"==typeof e)return e;if(kt(e))return NaN;if(Pt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Pt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Vt(e);var r=Ut.test(e);return r||Ft.test(e)?Ct(e.slice(2),r?2:8):Dt.test(e)?NaN:+e},Rt=Math.max,qt=Math.min;var Lt=function(e,t,r){var n,o,i,u,c,a,f=0,s=!1,l=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var r=n,i=o;return n=o=void 0,f=t,u=e.apply(i,r)}function v(e){return f=e,c=setTimeout(y,t),s?p(e):u}function b(e){var r=e-a;return void 0===a||r>=t||r<0||l&&e-f>=i}function y(){var e=Wt();if(b(e))return w(e);c=setTimeout(y,function(e){var r=t-(e-a);return l?qt(r,i-(e-f)):r}(e))}function w(e){return c=void 0,d&&n?p(e):(n=o=void 0,u)}function g(){var e=Wt(),r=b(e);if(n=arguments,o=this,a=e,r){if(void 0===c)return v(a);if(l)return clearTimeout(c),c=setTimeout(y,t),p(a)}return void 0===c&&(c=setTimeout(y,t)),u}return t=Nt(t)||0,Bt(r)&&(s=!!r.leading,i=(l="maxWait"in r)?Rt(Nt(r.maxWait)||0,t):i,d="trailing"in r?!!r.trailing:d),g.cancel=function(){void 0!==c&&clearTimeout(c),f=0,n=a=o=c=void 0},g.flush=function(){return void 0===c?u:w(Wt())},g};const zt=({name:e="viewer",debug:t=!1}={})=>{async function n(t,n,u=!1,a=!1){await r.nextTick(),a&&!function(e){const t=e.innerHTML.match(/<img([\w\W]+?)[\\/]?>/g),r=t?t.join(""):void 0;return e.__viewerImageDiffCache===r?(c("Element change detected, but image(s) has not changed"),!1):(c("Image change detected"),e.__viewerImageDiffCache=r,!0)}(t)||(u||!t[`$${e}`]?(i(t),t[`$${e}`]=new o.default(t,n),c("Viewer created")):(t[`$${e}`].update(),c("Viewer updated")))}function i(t){t[`$${e}`]&&(t[`$${e}`].destroy(),delete t[`$${e}`],c("Viewer destroyed"))}function u(e){e.__viewerMutationObserver&&(e.__viewerMutationObserver.disconnect(),delete e.__viewerMutationObserver,c("observer destroyed"))}function c(...e){t&&console.log(...e)}return{mounted(e,t,o){c("Viewer bind");const i=Lt(n,50);i(e,t.value),function(e,t,n,o){e.__viewerUnwatch=r.watch((()=>t.value),((r,n)=>{c("Change detected by watcher: ",t.value),o(e,r,!0,!1)}),{deep:!0}),c("Watcher created, expression: ",t.value)}(e,t,0,i),t.modifiers.static||function(e,t,r,n){u(e);const o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(!o)return void c("Observer not supported");const i=new o((o=>{o.forEach((o=>{c(`Viewer mutation:${o.type}`),r(e,t,n,!0)}))}));i.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__viewerMutationObserver=i,c("Observer created")}(e,t.value,i,t.modifiers.rebuild)},unmounted(e){c("Viewer unbind"),u(e),function(e){e.__viewerUnwatch&&(e.__viewerUnwatch(),delete e.__viewerUnwatch,c("Watcher destroyed"))}(e),i(e)}}};var Gt=r.defineComponent({name:"Viewer",props:{images:{type:Array,default:()=>[]},rebuild:{type:Boolean,default:!1},trigger:{type:Object,default:null},options:{type:Object,default:()=>null}},emits:["inited"],setup(e,{emit:t}){let n;const i=r.ref();function u(){n=new o.default(i.value,e.options),t("inited",n)}function c(){n&&n.destroy()}function a(){c(),u()}function f(){n?(n.update(),t("inited",n)):u()}function s(){e.rebuild?a():f()}const l={deep:!0};return r.watch((()=>e.images),(()=>r.nextTick((()=>s()))),l),r.watch((()=>e.trigger),(()=>r.nextTick((()=>s()))),l),r.watch((()=>e.options),(()=>r.nextTick((()=>a()))),l),r.onMounted((()=>u())),r.onUnmounted((()=>c())),{root:i,createViewer:u,rebuildViewer:a,updateViewer:f,destroyViewer:c}}});const Ht={ref:"root"};Gt.render=function(e,t,n,o,i,u){return r.openBlock(),r.createBlock("div",Ht,[r.renderSlot(e.$slots,"default",{images:e.images,options:e.options})],512)};var Kt={install(e,{name:t="viewer",debug:r=!1,defaultOptions:n}={}){n&&o.default.setDefaults(n),e.config.globalProperties[`$${t}Api`]=Tt,e.component(t,wt(Gt,{name:t})),e.directive(t,zt({name:t,debug:r}))},setDefaults(e){o.default.setDefaults(e)}};Object.defineProperty(e,"Viewer",{enumerable:!0,get:function(){return o.default}}),e.api=Tt,e.component=Gt,e.default=Kt,e.directive=zt,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
