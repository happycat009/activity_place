{"version":3,"file":"index.js","sources":["../../../../../../packages/components/tooltip/src/index.ts"],"sourcesContent":["import { defineComponent, h, ref, cloneVNode } from 'vue'\nimport {\n  default as ElPopper,\n  popperDefaultProps,\n} from '@element-plus/components/popper'\nimport { UPDATE_MODEL_EVENT } from '@element-plus/utils/constants'\nimport { throwError } from '@element-plus/utils/error'\nimport { getFirstValidNode } from '@element-plus/utils/vnode'\n\n/**\n * ElTooltip\n * Tooltip is essentially an upper layer for Popper, due to popper has already implemented so many functionalities and Popper is essentially a component shared internally\n * Tooltip also does the API translation work for popper.\n * Tooltip shares the exact same API which v2 has, so that the user should be able to\n */\nexport default defineComponent({\n  name: 'ElTooltip',\n  components: {\n    ElPopper,\n  },\n  props: {\n    ...popperDefaultProps,\n    manual: {\n      type: Boolean,\n      default: false,\n    },\n    modelValue: {\n      type: Boolean,\n      validator: (val: unknown) => {\n        return typeof val === 'boolean'\n      },\n      default: undefined,\n    },\n    // This API should be decaprecate since it's confusing with close-delay\n    openDelay: {\n      type: Number,\n      default: 0,\n    },\n    visibleArrow: {\n      type: Boolean,\n      default: true,\n    },\n    tabindex: {\n      type: [String, Number],\n      default: '0',\n    },\n  },\n  emits: [UPDATE_MODEL_EVENT],\n  setup(props, ctx) {\n    // when manual mode is true, v-model must be passed down\n    if (props.manual && typeof props.modelValue === 'undefined') {\n      throwError(\n        '[ElTooltip]',\n        'You need to pass a v-model to el-tooltip when `manual` is true'\n      )\n    }\n\n    const popper = ref(null)\n\n    const onUpdateVisible = (val) => {\n      ctx.emit(UPDATE_MODEL_EVENT, val)\n    }\n\n    const updatePopper = () => {\n      return popper.value.update()\n    }\n\n    return {\n      popper,\n      onUpdateVisible,\n      updatePopper,\n    }\n  },\n  render() {\n    const {\n      $slots,\n      content,\n      manual,\n      openDelay,\n      onUpdateVisible,\n      showAfter,\n      visibleArrow,\n      modelValue,\n      tabindex,\n      fallbackPlacements,\n    } = this\n\n    const throwErrorTip = () => {\n      throwError('[ElTooltip]', 'you need to provide a valid default slot.')\n    }\n\n    const popper = h(\n      ElPopper,\n      {\n        ...Object.keys(popperDefaultProps).reduce((result, key) => {\n          return { ...result, [key]: this[key] }\n        }, {}),\n        ref: 'popper',\n        manualMode: manual,\n        showAfter: openDelay || showAfter, // this is for mapping API due to we decided to rename the current openDelay API to showAfter for better readability,\n        showArrow: visibleArrow,\n        visible: modelValue,\n        'onUpdate:visible': onUpdateVisible,\n        fallbackPlacements: fallbackPlacements.length\n          ? fallbackPlacements\n          : ['bottom-start', 'top-start', 'right', 'left'],\n      },\n      {\n        default: () => ($slots.content ? $slots.content() : content),\n        trigger: () => {\n          if ($slots.default) {\n            const firstVnode = getFirstValidNode($slots.default(), 1)\n            if (!firstVnode) throwErrorTip()\n            return cloneVNode(firstVnode, { tabindex }, true)\n          }\n          throwErrorTip()\n        },\n      }\n    )\n\n    return popper\n  },\n})\n"],"names":["defineComponent","ElPopper","popperDefaultProps","UPDATE_MODEL_EVENT","throwError","ref","h","getFirstValidNode","cloneVNode"],"mappings":"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"}