{"version":3,"file":"index.vue_vue_type_script_lang.js","sources":["../../../../../../packages/components/popper/src/index.vue"],"sourcesContent":["<script lang=\"ts\">\nimport {\n  defineComponent,\n  Fragment,\n  Teleport,\n  onBeforeUnmount,\n  onDeactivated,\n  onActivated,\n  onMounted,\n  renderSlot,\n  toDisplayString,\n  withDirectives,\n  h,\n} from 'vue'\nimport { ClickOutside } from '@element-plus/directives'\nimport { throwError } from '@element-plus/utils/error'\n\nimport usePopper from './use-popper/index'\nimport defaultProps from './use-popper/defaults'\nimport { renderPopper, renderTrigger, renderArrow } from './renderers'\n\nconst compName = 'ElPopper'\nconst UPDATE_VISIBLE_EVENT = 'update:visible'\n\nexport default defineComponent({\n  name: compName,\n  props: defaultProps,\n  emits: [\n    UPDATE_VISIBLE_EVENT,\n    'after-enter',\n    'after-leave',\n    'before-enter',\n    'before-leave',\n  ],\n  setup(props, ctx) {\n    if (!ctx.slots.trigger) {\n      throwError(compName, 'Trigger must be provided')\n    }\n    // this is a reference that we need to pass down to child component\n    // to obtain the child instance\n\n    // return usePopper(props as IPopperOptions, ctx as SetupContext)\n    const popperStates = usePopper(props, ctx)\n\n    const forceDestroy = () => popperStates.doDestroy(true)\n    onMounted(popperStates.initializePopper)\n    onBeforeUnmount(forceDestroy)\n    onActivated(popperStates.initializePopper)\n    onDeactivated(forceDestroy)\n\n    return popperStates\n  },\n\n  render() {\n    const {\n      $slots,\n      appendToBody,\n      class: kls,\n      style,\n      effect,\n      hide,\n      onPopperMouseEnter,\n      onPopperMouseLeave,\n      onAfterEnter,\n      onAfterLeave,\n      onBeforeEnter,\n      onBeforeLeave,\n      popperClass,\n      popperId,\n      popperStyle,\n      pure,\n      showArrow,\n      transition,\n      visibility,\n      stopPopperMouseEvent,\n    } = this\n\n    const isManual = this.isManualMode()\n    const arrow = renderArrow(showArrow)\n    const popper = renderPopper(\n      {\n        effect,\n        name: transition,\n        popperClass,\n        popperId,\n        popperStyle,\n        pure,\n        stopPopperMouseEvent,\n        onMouseenter: onPopperMouseEnter,\n        onMouseleave: onPopperMouseLeave,\n        onAfterEnter,\n        onAfterLeave,\n        onBeforeEnter,\n        onBeforeLeave,\n        visibility,\n      },\n      [\n        renderSlot($slots, 'default', {}, () => {\n          return [toDisplayString(this.content)]\n        }),\n        arrow,\n      ]\n    )\n\n    const _t = $slots.trigger?.()\n\n    const triggerProps = {\n      'aria-describedby': popperId,\n      class: kls,\n      style,\n      ref: 'triggerRef',\n      ...this.events,\n    }\n\n    const trigger = isManual\n      ? renderTrigger(_t, triggerProps)\n      : withDirectives(renderTrigger(_t, triggerProps), [[ClickOutside, hide]])\n\n    return h(Fragment, null, [\n      trigger,\n      h(\n        Teleport as any, // Vue did not support createVNode for Teleport\n        {\n          to: 'body',\n          disabled: !appendToBody,\n        },\n        [popper]\n      ),\n    ])\n  },\n})\n</script>\n"],"names":["defaultProps","throwError","onBeforeUnmount","onActivated","onDeactivated","arrow","popper","toDisplayString","trigger","renderTrigger","h","Fragment","Teleport"],"mappings":";;;;;;;;;;;;;;;AAkBA,cAAc,GAAG,UAAU,CAAC;AAC5B,0BAA0B,GAAG,gBAAgB,CAAC;;AAE9C,EAAE,IAAI,EAAE;AACR,EAAE,KAAK,EAAEA,mBAAY;;AAErB,IAAI,oBAAoB;IACpB;IACA,aAAa;IACb;IACA,cAAc;;OAEX,CAAC,KAAK,EAAE;IACX,IAAI,CAAC,GAAG,CAAC,KAAK;MACZC,gBAAU,CAAC;;IAEb,MAAM;IACN,MAAM,YAAY,GAAG;iBACZ,CAAC,aAAa,iBAAiB,CAAC;IACzCC;IACAC,eAAW,aAAa,CAAC,gBAAgB,CAAC;IAC1CC,iBAAa,CAAC,YAAY,CAAC,CAAC;;;QAGxB,GAAG;;IAEP,MAAM;MACJ,MAAM;MACN,YAAY;MACZ,KAAK,EAAE,GAAG;MACV,KAAK;;MAEL;;;MAGA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,IAAI;MACJ,SAAS;MACT,UAAU;MACV,UAAU;MACV;QACE,IAAI,CAAC;UACH,QAAQ;UACRC,OAAK;UACLC;MACJ,MAAM;MACN,IAAI;MACJ;MACA,QAAQ;MACR;MACA,IAAI;MACJ;;MAEA,gCAAgC;MAChC,YAAY;MACZ;MACA;;gBAEU;;oBAEA;QACR,OAAO,CAACC;QACR;aACG;;UAED,EAAE,GAAG,CAAC,EAAE,SAAS,CAAC,OAAO,KAAK;UAC9B;;WAEC,EAAE,GAAG;WACL;SACF,EAAE;MACL;MACA;UACIC,SAAO,GAAG,QAAQ,GAAGC,mBAAc;WAClCC,KAAC,CAACC,YAAQ,EAAE,IAAI,EAAE;;YAErBC;;;;KAIH,CAAC,CAAC;;;;;;"}