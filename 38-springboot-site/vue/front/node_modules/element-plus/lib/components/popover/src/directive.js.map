{"version":3,"file":"directive.js","sources":["../../../../../../packages/components/popover/src/directive.ts"],"sourcesContent":["import { on } from '@element-plus/utils/dom'\n\nimport type { DirectiveBinding, VNode, ObjectDirective } from 'vue'\n\ninterface PopoverInstance {\n  events: Record<string, EventListenerOrEventListenerObject>\n  triggerRef: HTMLElement\n  tabindex: string | number\n}\n\nconst attachEvents = (\n  el: HTMLElement,\n  binding: DirectiveBinding,\n  vnode: VNode\n) => {\n  const _ref = binding.arg || binding.value\n  const popover = vnode.dirs[0].instance.$refs[_ref] as PopoverInstance\n  if (popover) {\n    popover.triggerRef = el\n    el.setAttribute('tabindex', popover.tabindex as string)\n    // because v-popover cannot modify the vnode itself due to it has already been\n    Object.entries(popover.events).forEach(([eventName, e]) => {\n      on(el, eventName.toLowerCase().slice(2), e)\n    })\n  }\n}\n\nexport default {\n  mounted(el, binding, vnode) {\n    attachEvents(el, binding, vnode)\n  },\n  updated(el, binding, vnode) {\n    attachEvents(el, binding, vnode)\n  },\n} as ObjectDirective\n\nexport const VPopover = 'popover'\n"],"names":["on"],"mappings":";;;;;;AACA,MAAM,YAAY,GAAG,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,KAAK;AAC7C,EAAE,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,IAAI,OAAO,CAAC,KAAK,CAAC;AAC5C,EAAE,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACrD,EAAE,IAAI,OAAO,EAAE;AACf,IAAI,OAAO,CAAC,UAAU,GAAG,EAAE,CAAC;AAC5B,IAAI,EAAE,CAAC,YAAY,CAAC,UAAU,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;AAClD,IAAI,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,KAAK;AAC/D,MAAMA,MAAE,CAAC,EAAE,EAAE,SAAS,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAClD,KAAK,CAAC,CAAC;AACP,GAAG;AACH,CAAC,CAAC;AACF,uBAAe;AACf,EAAE,OAAO,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;AAC9B,IAAI,YAAY,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;AACrC,GAAG;AACH,EAAE,OAAO,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE;AAC9B,IAAI,YAAY,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;AACrC,GAAG;AACH,CAAC,CAAC;AACU,MAAC,QAAQ,GAAG;;;;;"}