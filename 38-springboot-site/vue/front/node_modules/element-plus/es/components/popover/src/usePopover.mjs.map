{"version":3,"file":"usePopover.mjs","sources":["../../../../../../packages/components/popover/src/usePopover.ts"],"sourcesContent":["import { computed, ref, watch } from 'vue'\nimport { isString } from '@element-plus/utils/util'\nimport { usePopper } from '@element-plus/components/popper'\nimport { PopupManager } from '@element-plus/utils/popup-manager'\n\nimport type { SetupContext } from 'vue'\nimport type { IPopperOptions, EmitType } from '@element-plus/components/popper'\nexport interface IUsePopover extends IPopperOptions {\n  width: number | string\n}\n\nexport const SHOW_EVENT = 'show'\nexport const HIDE_EVENT = 'hide'\n\nexport default function usePopover(\n  props: IUsePopover,\n  ctx: SetupContext<string[]>\n) {\n  const zIndex = ref(PopupManager.nextZIndex())\n  const width = computed(() => {\n    if (isString(props.width)) {\n      return props.width as string\n    }\n    return `${props.width}px`\n  })\n\n  const popperStyle = computed(() => {\n    return {\n      width: width.value,\n      zIndex: zIndex.value,\n    }\n  })\n\n  const popperProps = usePopper(props, ctx as SetupContext<EmitType[]>)\n\n  watch(popperProps.visibility, (val) => {\n    if (val) {\n      zIndex.value = PopupManager.nextZIndex()\n    }\n    ctx.emit(val ? SHOW_EVENT : HIDE_EVENT)\n  })\n\n  return {\n    ...popperProps,\n    popperStyle,\n  }\n}\n"],"names":[],"mappings":";;;;;;;AAIY,MAAC,UAAU,GAAG,OAAO;AACrB,MAAC,UAAU,GAAG,OAAO;AAClB,SAAS,UAAU,CAAC,KAAK,EAAE,GAAG,EAAE;AAC/C,EAAE,MAAM,MAAM,GAAG,GAAG,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC,CAAC;AAChD,EAAE,MAAM,KAAK,GAAG,QAAQ,CAAC,MAAM;AAC/B,IAAI,IAAI,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;AAC/B,MAAM,OAAO,KAAK,CAAC,KAAK,CAAC;AACzB,KAAK;AACL,IAAI,OAAO,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;AAC9B,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,WAAW,GAAG,QAAQ,CAAC,MAAM;AACrC,IAAI,OAAO;AACX,MAAM,KAAK,EAAE,KAAK,CAAC,KAAK;AACxB,MAAM,MAAM,EAAE,MAAM,CAAC,KAAK;AAC1B,KAAK,CAAC;AACN,GAAG,CAAC,CAAC;AACL,EAAE,MAAM,WAAW,GAAG,SAAS,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AAC5C,EAAE,KAAK,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC,GAAG,KAAK;AACzC,IAAI,IAAI,GAAG,EAAE;AACb,MAAM,MAAM,CAAC,KAAK,GAAG,YAAY,CAAC,UAAU,EAAE,CAAC;AAC/C,KAAK;AACL,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,UAAU,GAAG,UAAU,CAAC,CAAC;AAC5C,GAAG,CAAC,CAAC;AACL,EAAE,OAAO;AACT,IAAI,GAAG,WAAW;AAClB,IAAI,WAAW;AACf,GAAG,CAAC;AACJ;;;;"}