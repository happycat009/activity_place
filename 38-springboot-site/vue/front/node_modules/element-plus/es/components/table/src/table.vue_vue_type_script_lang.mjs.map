{"version":3,"file":"table.vue_vue_type_script_lang.mjs","sources":["../../../../../../packages/components/table/src/table.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"[\n      {\n        'el-table--fit': fit,\n        'el-table--striped': stripe,\n        'el-table--border': border || isGroup,\n        'el-table--hidden': isHidden,\n        'el-table--group': isGroup,\n        'el-table--fluid-height': maxHeight,\n        'el-table--scrollable-x': layout.scrollX.value,\n        'el-table--scrollable-y': layout.scrollY.value,\n        'el-table--enable-row-hover': !store.states.isComplex.value,\n        'el-table--enable-row-transition':\n          (store.states.data.value || []).length !== 0 &&\n          (store.states.data.value || []).length < 100,\n      },\n      tableSize ? `el-table--${tableSize}` : '',\n      className,\n      'el-table',\n    ]\"\n    :style=\"style\"\n    @mouseleave=\"handleMouseLeave()\"\n  >\n    <div ref=\"hiddenColumns\" class=\"hidden-columns\">\n      <slot></slot>\n    </div>\n    <div\n      v-if=\"showHeader\"\n      ref=\"headerWrapper\"\n      v-mousewheel=\"handleHeaderFooterMousewheel\"\n      class=\"el-table__header-wrapper\"\n    >\n      <table-header\n        ref=\"tableHeader\"\n        :border=\"border\"\n        :default-sort=\"defaultSort\"\n        :store=\"store\"\n        :style=\"{\n          width: layout.bodyWidth.value ? layout.bodyWidth.value + 'px' : '',\n        }\"\n        @set-drag-visible=\"setDragVisible\"\n      />\n    </div>\n    <div ref=\"bodyWrapper\" :style=\"[bodyHeight]\" class=\"el-table__body-wrapper\">\n      <table-body\n        :context=\"context\"\n        :highlight=\"highlightCurrentRow\"\n        :row-class-name=\"rowClassName\"\n        :tooltip-effect=\"tooltipEffect\"\n        :row-style=\"rowStyle\"\n        :store=\"store\"\n        :stripe=\"stripe\"\n        :style=\"{\n          width: bodyWidth,\n        }\"\n      />\n      <div\n        v-if=\"isEmpty\"\n        ref=\"emptyBlock\"\n        :style=\"emptyBlockStyle\"\n        class=\"el-table__empty-block\"\n      >\n        <span class=\"el-table__empty-text\">\n          <slot name=\"empty\">{{ emptyText || t('el.table.emptyText') }}</slot>\n        </span>\n      </div>\n      <div\n        v-if=\"$slots.append\"\n        ref=\"appendWrapper\"\n        class=\"el-table__append-wrapper\"\n      >\n        <slot name=\"append\"></slot>\n      </div>\n    </div>\n    <div\n      v-if=\"showSummary\"\n      v-show=\"!isEmpty\"\n      ref=\"footerWrapper\"\n      v-mousewheel=\"handleHeaderFooterMousewheel\"\n      class=\"el-table__footer-wrapper\"\n    >\n      <table-footer\n        :border=\"border\"\n        :default-sort=\"defaultSort\"\n        :store=\"store\"\n        :style=\"{\n          width: layout.bodyWidth.value ? layout.bodyWidth.value + 'px' : '',\n        }\"\n        :sum-text=\"sumText || t('el.table.sumText')\"\n        :summary-method=\"summaryMethod\"\n      />\n    </div>\n    <div\n      v-if=\"store.states.fixedColumns.value.length > 0\"\n      ref=\"fixedWrapper\"\n      v-mousewheel=\"handleFixedMousewheel\"\n      :style=\"[\n        {\n          width: layout.fixedWidth.value ? layout.fixedWidth.value + 'px' : '',\n        },\n        fixedHeight,\n      ]\"\n      class=\"el-table__fixed\"\n    >\n      <div\n        v-if=\"showHeader\"\n        ref=\"fixedHeaderWrapper\"\n        class=\"el-table__fixed-header-wrapper\"\n      >\n        <table-header\n          ref=\"fixedTableHeader\"\n          :border=\"border\"\n          :store=\"store\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          fixed=\"left\"\n          @set-drag-visible=\"setDragVisible\"\n        />\n      </div>\n      <div\n        ref=\"fixedBodyWrapper\"\n        :style=\"[\n          {\n            top: layout.headerHeight.value + 'px',\n          },\n          fixedBodyHeight,\n        ]\"\n        class=\"el-table__fixed-body-wrapper\"\n      >\n        <table-body\n          :highlight=\"highlightCurrentRow\"\n          :row-class-name=\"rowClassName\"\n          :tooltip-effect=\"tooltipEffect\"\n          :row-style=\"rowStyle\"\n          :store=\"store\"\n          :stripe=\"stripe\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          fixed=\"left\"\n        />\n        <div\n          v-if=\"$slots.append\"\n          :style=\"{ height: layout.appendHeight.value + 'px' }\"\n          class=\"el-table__append-gutter\"\n        ></div>\n      </div>\n      <div\n        v-if=\"showSummary\"\n        v-show=\"!isEmpty\"\n        ref=\"fixedFooterWrapper\"\n        class=\"el-table__fixed-footer-wrapper\"\n      >\n        <table-footer\n          :border=\"border\"\n          :store=\"store\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          :sum-text=\"sumText || t('el.table.sumText')\"\n          :summary-method=\"summaryMethod\"\n          fixed=\"left\"\n        />\n      </div>\n    </div>\n    <div\n      v-if=\"store.states.rightFixedColumns.value.length > 0\"\n      ref=\"rightFixedWrapper\"\n      v-mousewheel=\"handleFixedMousewheel\"\n      :style=\"[\n        {\n          width: layout.rightFixedWidth.value\n            ? layout.rightFixedWidth.value + 'px'\n            : '',\n          right: layout.scrollY.value\n            ? (border ? layout.gutterWidth : layout.gutterWidth || 0) + 'px'\n            : '',\n        },\n        fixedHeight,\n      ]\"\n      class=\"el-table__fixed-right\"\n    >\n      <div\n        v-if=\"showHeader\"\n        ref=\"rightFixedHeaderWrapper\"\n        class=\"el-table__fixed-header-wrapper\"\n      >\n        <table-header\n          ref=\"rightFixedTableHeader\"\n          :border=\"border\"\n          :store=\"store\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          fixed=\"right\"\n          @set-drag-visible=\"setDragVisible\"\n        />\n      </div>\n      <div\n        ref=\"rightFixedBodyWrapper\"\n        :style=\"[{ top: layout.headerHeight.value + 'px' }, fixedBodyHeight]\"\n        class=\"el-table__fixed-body-wrapper\"\n      >\n        <table-body\n          :highlight=\"highlightCurrentRow\"\n          :row-class-name=\"rowClassName\"\n          :tooltip-effect=\"tooltipEffect\"\n          :row-style=\"rowStyle\"\n          :store=\"store\"\n          :stripe=\"stripe\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          fixed=\"right\"\n        />\n        <div\n          v-if=\"$slots.append\"\n          :style=\"{ height: layout.appendHeight.value + 'px' }\"\n          class=\"el-table__append-gutter\"\n        ></div>\n      </div>\n      <div\n        v-if=\"showSummary\"\n        v-show=\"!isEmpty\"\n        ref=\"rightFixedFooterWrapper\"\n        class=\"el-table__fixed-footer-wrapper\"\n      >\n        <table-footer\n          :border=\"border\"\n          :store=\"store\"\n          :style=\"{\n            width: bodyWidth,\n          }\"\n          :sum-text=\"sumText || t('el.table.sumText')\"\n          :summary-method=\"summaryMethod\"\n          fixed=\"right\"\n        />\n      </div>\n    </div>\n    <div\n      v-if=\"store.states.rightFixedColumns.value.length > 0\"\n      ref=\"rightFixedPatch\"\n      :style=\"{\n        width: layout.scrollY.value ? layout.gutterWidth + 'px' : '0',\n        height: layout.headerHeight.value + 'px',\n      }\"\n      class=\"el-table__fixed-right-patch\"\n    ></div>\n    <div\n      v-show=\"resizeProxyVisible\"\n      ref=\"resizeProxy\"\n      class=\"el-table__column-resize-proxy\"\n    ></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, getCurrentInstance, computed } from 'vue'\nimport debounce from 'lodash/debounce'\nimport { Mousewheel } from '@element-plus/directives'\nimport { useLocale } from '@element-plus/hooks'\nimport { createStore } from './store/helper'\nimport TableLayout from './table-layout'\nimport TableHeader from './table-header'\nimport TableBody from './table-body'\nimport TableFooter from './table-footer'\nimport useUtils from './table/utils-helper'\nimport useStyle from './table/style-helper'\nimport defaultProps from './table/defaults'\n\nimport type { Table } from './table/defaults'\n\nlet tableIdSeed = 1\nexport default defineComponent({\n  name: 'ElTable',\n  directives: {\n    Mousewheel,\n  },\n  components: {\n    TableHeader,\n    TableBody,\n    TableFooter,\n  },\n  props: defaultProps,\n  emits: [\n    'select',\n    'select-all',\n    'selection-change',\n    'cell-mouse-enter',\n    'cell-mouse-leave',\n    'cell-contextmenu',\n    'cell-click',\n    'cell-dblclick',\n    'row-click',\n    'row-contextmenu',\n    'row-dblclick',\n    'header-click',\n    'header-contextmenu',\n    'sort-change',\n    'filter-change',\n    'current-change',\n    'header-dragend',\n    'expand-change',\n  ],\n  setup(props) {\n    type Row = typeof props.data[number]\n    const { t } = useLocale()\n    const table = getCurrentInstance() as Table<Row>\n    const store = createStore<Row>(table, props)\n    table.store = store\n    const layout = new TableLayout<Row>({\n      store: table.store,\n      table,\n      fit: props.fit,\n      showHeader: props.showHeader,\n    })\n    table.layout = layout\n\n    const isEmpty = computed(() => (store.states.data.value || []).length === 0)\n\n    /**\n     * open functions\n     */\n    const {\n      setCurrentRow,\n      toggleRowSelection,\n      clearSelection,\n      clearFilter,\n      toggleAllSelection,\n      toggleRowExpansion,\n      clearSort,\n      sort,\n    } = useUtils<Row>(store)\n    const {\n      isHidden,\n      renderExpanded,\n      setDragVisible,\n      isGroup,\n      handleMouseLeave,\n      handleHeaderFooterMousewheel,\n      tableSize,\n      bodyHeight,\n      emptyBlockStyle,\n      handleFixedMousewheel,\n      fixedHeight,\n      fixedBodyHeight,\n      resizeProxyVisible,\n      bodyWidth,\n      resizeState,\n      doLayout,\n    } = useStyle<Row>(props, layout, store, table)\n\n    const debouncedUpdateLayout = debounce(doLayout, 50)\n\n    const tableId = `el-table_${tableIdSeed++}`\n    table.tableId = tableId\n    table.state = {\n      isGroup,\n      resizeState,\n      doLayout,\n      debouncedUpdateLayout,\n    }\n    return {\n      layout,\n      store,\n      handleHeaderFooterMousewheel,\n      handleMouseLeave,\n      tableId,\n      tableSize,\n      isHidden,\n      isEmpty,\n      renderExpanded,\n      resizeProxyVisible,\n      resizeState,\n      isGroup,\n      bodyWidth,\n      bodyHeight,\n      emptyBlockStyle,\n      debouncedUpdateLayout,\n      handleFixedMousewheel,\n      fixedHeight,\n      fixedBodyHeight,\n      setCurrentRow,\n      toggleRowSelection,\n      clearSelection,\n      clearFilter,\n      toggleAllSelection,\n      toggleRowExpansion,\n      clearSort,\n      doLayout,\n      sort,\n      t,\n      setDragVisible,\n      context: table,\n    }\n  },\n})\n</script>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AA8QA,IAAI,WAAW,GAAG,EAAE;;AAEpB,EAAE,MAAM,SAAS;;AAEjB,IAAI,UAAU;AACd,GAAG;EACD,UAAU,EAAE;IACV;IACA,SAAS;;GAEV;OACI,EAAE;OACF,EAAE;IACL,QAAQ;;IAER;IACA;IACA;IACA;IACA,YAAY;IACZ,eAAe;IACf,WAAW;IACX,iBAAiB;IACjB;IACA,cAAc;IACd;IACA,aAAa;IACb;IACA;IACA,gBAAgB;IAChB;;OAEG,CAAC,KAAK,EAAE;IACX,MAAM,EAAE,CAAC,EAAE,GAAG;IACd,MAAM,KAAK,GAAG;;IAEd,KAAK,CAAC,KAAK;IACX,MAAM,MAAM,GAAG,IAAI,WAAW,CAAC;MAC7B,YAAY,CAAC,KAAK;MAClB,KAAK;MACL,KAAK,KAAK,IAAI;MACd,UAAU,EAAE;KACb,CAAC,CAAC;SACE,CAAC,MAAM,GAAG;UACT;;MAEJ,aAAa;;MAEb,cAAc;;MAEd,kBAAkB;;MAElB;UACI;KACL;IACD,MAAM;MACJ,QAAQ;MACR,cAAc;MACd,cAAc;MACd,OAAO;MACP,gBAAgB;MAChB;MACA,SAAS;MACT;MACA,eAAe;MACf;MACA;MACA;MACA;MACA;MACA,WAAW;MACX,QAAQ;QACN;UACE;UACA,OAAO,GAAG,CAAC;SACZ,CAAC,OAAO,GAAG,OAAO;SAClB,CAAC,KAAK;MACT,OAAO;MACP,WAAW;MACX,QAAQ;MACR;MACA;IACF,OAAO;;MAEL,KAAK;;MAEL,gBAAgB;MAChB,OAAO;MACP;MACA;MACA,OAAO;MACP;MACA,kBAAkB;;MAElB;MACA;MACA;MACA,eAAe;MACf;MACA;MACA;MACA;MACA;MACA;MACA,cAAc;MACd,WAAW;MACX;MACA;MACA,SAAS;MACT,QAAQ;MACR,IAAI;MACJ,CAAC;MACD;MACA,OAAO,EAAE,KAAK;MACd;;;;;;"}