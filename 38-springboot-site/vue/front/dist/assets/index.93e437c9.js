var A=Object.defineProperty,U=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var D=(e,a,t)=>a in e?A(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,b=(e,a)=>{for(var t in a||(a={}))B.call(a,t)&&D(e,t,a[t]);if(R)for(var t of R(a))Y.call(a,t)&&D(e,t,a[t]);return e},g=(e,a)=>U(e,M(a));/* empty css             *//* empty css                       *//* empty css                 */import{r as I,U as S,C as T,a as z}from"./index.4c3bf3be.js";import{r as Q}from"./requestE401.6d075b26.js";import{y as N,o as c,q as p,d as _,w as m,F as v,D as k,c as P,A as f,B as d,a5 as O,a6 as G,x as o,G as H,P as J,s as K,v as W,M as X,a7 as Z,a8 as ee,a9 as ae,aa as te,C as se,a3 as oe,a as V}from"./vendor.94a1cd75.js";import{_ as y}from"./plugin-vue_export-helper.21dcd24c.js";/* empty css                   *//* empty css                  *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                         */import{h as j}from"./moment.08a7f518.js";import{_ as re}from"./YhPagination.54041a25.js";const le=(e,a,t,u,s)=>{const l={methodname:"B407",aab001:e,queryParam:a,pageNo:t,pageSize:u,aae100:s};return new Promise((n,i)=>{I("/frontRestService/frontCommonDataRestService/getData",l).then(h=>{n(h)}).catch(h=>{i(h)})})},ne=e=>{const a={methodname:"B412",chb000:e};return new Promise((t,u)=>{I("/frontRestService/frontCommonDataRestService/getData",a).then(s=>{t(s)}).catch(s=>{u(s)})})};const ie={name:"EnterprisesRecordToolbar",props:{staRefresh:{type:[Number],required:!0,default:()=>0}},data(){return{staData:{},radio:null}},inject:["recordTypeProvide"],mounted(){const{recordType:e}=this.$route.query;this.radio=e==null?0:Number(e),this.loadStaImpl()},methods:{loadStaImpl(){Q([{method:"enterprisesStatisticsCount",param:{aab001:this.corporateInfo.aab001,orgid:this.corporateInfo.aab001}}]).then(e=>{const{code:a,data:t}=e;if(a=="200"){const{enterprisesStatisticsCountMap:u}=t;this.staData=u}})}},watch:{radio:{handler(e){e!=null&&(this.$router.push("/enterprises/record?recordType="+e),this.$emit("updateRecordType",e))},immediate:!0,deep:!0},recordTypeProvideComputed:{handler(e){e!=null&&(this.radio=e)}},staRefresh:{handler(){this.loadStaImpl()}}},computed:g(b({},N([S,T,z])),{customData(){let e=this;return{filter:[{value:-1,name:"\u5168\u90E8\u7533\u62A5\u8BB0\u5F55\uFF08"+(Number(e.staData.ingbusnum)+Number(e.staData.backbusnum)+Number(e.staData.finishbusnum)+Number(e.staData.cancelbusnum))+"\u9879\uFF09"},{value:0,name:"\u4EC5\u5C55\u793A\u8FDB\u884C\u4E2D\u9879\u76EE\uFF08"+(e.staData.ingbusnum||0)+"\u9879\uFF09"},{value:1,name:"\u4EC5\u5C55\u793A\u88AB\u9A73\u56DE\u9879\u76EE\uFF08"+(e.staData.backbusnum||0)+"\u9879\uFF09"},{value:2,name:"\u4EC5\u5C55\u793A\u5DF2\u4EAB\u53D7\u9879\u76EE\uFF08"+(e.staData.finishbusnum||0)+"\u9879\uFF09"}]}},recordTypeProvideComputed(){return this.recordTypeProvide()}})},ce={class:"toolbar"};function de(e,a,t,u,s,l){const n=O,i=G;return c(),p("div",ce,[_(i,{modelValue:s.radio,"onUpdate:modelValue":a[0]||(a[0]=h=>s.radio=h)},{default:m(()=>[(c(!0),p(v,null,k(l.customData.filter,h=>(c(),P(n,{label:h.value},{default:m(()=>[f(d(h.name),1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])])}var pe=y(ie,[["render",de],["__scopeId","data-v-ad9e76f4"]]);const ue={name:"YhApplyProcess",props:{dataList:{type:[Array],required:!0,default:()=>[]}},data(){return{}},mounted(){this.userCodeTableMap("yesorno"),this.userCodeTableMap("cpb102")},methods:{getDateFormatted(e,a){return e?j(e).format(a):""}},watch:{dataList:{handler(e){},immediate:!0,deep:!0}}},w=e=>(K("data-v-0843fd84"),e=e(),W(),e),he={class:"yh-apply-process-wrapper"},_e={class:"time"},me={class:"icon"},be={key:0,class:"iconfont iconfont-hook"},ge={key:1,class:"now"},fe={key:2,class:"ing"},ye={class:"content"},ve={class:"name"},ke={class:"cells"},Ce={class:"cell"},xe={class:"key"},Re={class:"value"},De={key:0,class:"cell"},Ie=w(()=>o("div",{class:"key"},"\u7533\u62A5\u72B6\u6001\uFF1A",-1)),Se={class:"value"},Te={key:1,class:"cell"},ze=w(()=>o("div",{class:"key"},"\u7ECF\u529E\u72B6\u6001\uFF1A",-1)),Ne={class:"value"},Pe={class:"cells"},Ve={key:0,class:"iconfont iconfont-arrow-down"};function je(e,a,t,u,s,l){return c(),p("div",he,[o("ul",null,[(c(!0),p(v,null,k(t.dataList,(n,i)=>(c(),p("li",{key:i,class:H([i==2?"active":""])},[o("div",_e,d(l.getDateFormatted(n.aae036,"YYYY-MM-DD HH:mm")),1),o("div",me,[n.handleFinish=="1"?(c(),p("i",be)):t.dataList[i-1].handleFinish=="1"&&t.dataList[i].handleFinish!="1"?(c(),p("div",ge)):(c(),p("div",fe))]),o("div",ye,[o("div",ve,d(n.che011),1),o("div",ke,[o("div",Ce,[o("div",xe,d(n.che063=="01"?"\u7533\u62A5\u4EBA":"\u7ECF\u529E\u4EBA")+"\uFF1A",1),o("div",Re,d(n.aae011),1)]),n.che063=="01"?(c(),p("div",De,[Ie,o("div",Se,d(e.getCollectionDesc("yesorno",n.handleFinish)),1)])):(c(),p("div",Te,[ze,o("div",Ne,d(e.getCollectionDesc("cpb102",n.cpb102)),1)]))]),o("div",Pe,[o("div",null,"\u7ECF\u529E\u5185\u5BB9\uFF1A"+d(n.cpb103),1)])]),i==5?(c(),p("i",Ve)):J("",!0)],2))),128))])])}var F=y(ue,[["render",je],["__scopeId","data-v-0843fd84"]]);const we={name:"EnterprisesRecordQueryResult",components:{YhApplyProcess:F,YhPagination:re},props:{type:{type:Number,required:!0}},data(){return{hb00List:[],listVisiable:!1,dialogVisible:!1,selectedData:null,tagType:0,tablePageInfo:{pageNo:1,pageSize:5,total:0},pageInfo:{pageNo:1,pageSize:5,total:0},reapplyFlag:!1,collapseItem:-1}},methods:{test(){console.log("dialogVisible",this.dialogVisible)},toJudge(e){this.$router.push("/home/questionnaire/1&"+e)},getDateFormatted(e,a){return j(e).format(a)},showToReApply(e,a){this.reapplyFlag=a,this.selectedData=e,this.dialogVisible=!0},closeToReApply(){this.selectedData=null},toReApply(){let e=this;const{chb000:a,chi031:t}=e.selectedData;ne(a).then(u=>{e.dialogVisible=!1;const{data:s}=u;s.code=="200"&&(e.reapplyFlag?(e.$message.success("\u64A4\u9500\u6210\u529F\uFF0C\u8BF7\u91CD\u65B0\u586B\u5199\u7533\u62A5\u6570\u636E\uFF01"),e.$router.push(`/apply/${t}`)):(e.$message.success("\u64A4\u9500\u6210\u529F\uFF01"),e.$nextTick(()=>{e.$emit("updateStaRefresh"),e.loadTableData()})))})},pageNoChange(e){this.pageInfo.pageNo=e,this.tablePageInfo.pageNo=e},pageSizeChange(e){this.pageInfo.pageSize=e,this.tablePageInfo.pageSize=e},loadTableData(){let e=this.param;!e.queryParam||le(e.aab001,e.queryParam,e.pageNo,e.pageSize,e.aae100).then(a=>{const{code:t,data:u}=a;if(t=="200"){const{hb00List:s,hb00ListPageInfo:l}=u;let n=[];s.map(i=>{if(i.aae019){let h=this.unitConvert(i.aae019||0);n.push(g(b({},i),{aae019Formatted:h.num+h.unit+"\u5143"}))}else n.push(g(b({},i),{aae019Formatted:"\u6682\u65E0"}))}),this.hb00List=n,this.pageInfo.total=l.total,this.listVisiable=!0,this.collapseItem=-1,this.tagType=this.type}})},tagStyle(e){let a={};switch(e.chb00k){case"1":a={"font-size":"14px",color:"white",padding:"6px 18px","line-height":"1","background-color":"#43a4ae","border-radius":"50px"};break;case"2":a={"font-size":"14px",color:"#245319",padding:"6px 18px","line-height":"1","background-color":"#99cd87","border-radius":"50px"};break;case"3":a={"font-size":"14px",color:"#f90000",padding:"6px 18px","line-height":"1","background-color":"#ffebeb","border-radius":"50px"};break;case"4":a={"font-size":"14px",color:"#f90000",padding:"6px 18px","line-height":"1","background-color":"#ffebeb","border-radius":"50px"};break;case"5":a={"font-size":"14px",color:"#f90000",padding:"6px 18px","line-height":"1","background-color":"#ffebeb","border-radius":"50px"};break;case"6":a={"font-size":"14px",color:"#f90000",padding:"6px 18px","line-height":"1","background-color":"#ffebeb","border-radius":"50px"};break;case"7":a={"font-size":"14px",color:"#f90000",padding:"6px 18px","line-height":"1","background-color":"#ffebeb","border-radius":"50px"};break}return a}},mounted(){this.userCodeTableMap("aab301"),this.userCodeTableMap("cpb070"),this.userCodeTableMap("chb00k")},watch:{type:{handler(e){this.listVisiable=!1,this.tablePageInfo={pageNo:1,pageSize:5},this.pageInfo={pageNo:1,pageSize:5},this.loadTableData()}},param:{handler(){this.loadTableData()},immediate:!0,deep:!0}},computed:g(b({},N([S,T,z])),{param(){let e=this,a="",t="1";switch(e.type){case-1:a="all";break;case 0:a="ing";break;case 1:a="back",t="0";break;case 2:a="finish";break;case 3:a="cancel";break}return g(b({aab001:this.corporateInfo.aab001},this.tablePageInfo),{queryParam:a,aae100:t})}})},Fe={class:"record-query-result"},Ee={class:"record-collapse-title"},$e={class:"record-collapse-title-project-name"},qe={class:"record-collapse-title-project-info"},Le={class:"record-collapse-title-button-wrapper"},Ae=["onClick","disabled"],Ue=["onClick"],Me={class:"record-collapse-item-con"},Be=o("br",null,null,-1),Ye=f("\u5F53\u524D\u7533\u62A5\u6570\u636E\u5C06\u4F1A\u88AB\u64A4\u9500\uFF01\uFF01\uFF01"),Qe={class:"dialog-footer"},Oe=f("\u53D6\u6D88");function Ge(e,a,t,u,s,l){const n=F,i=Z,h=ee,E=ae,$=te,C=se,q=oe;return c(),p("div",Fe,[_(E,{height:"800px"},{default:m(()=>[_(h,{accordion:"",class:"record-collapse",style:{"max-height":"800px","min-height":"600px"},modelValue:s.collapseItem,"onUpdate:modelValue":a[0]||(a[0]=r=>s.collapseItem=r)},{default:m(()=>[(c(!0),p(v,null,k(s.hb00List,(r,x)=>(c(),P(i,{key:x,name:x+1,class:"record-collapse-item"},{title:m(()=>[o("div",Ee,[o("div",$e,[o("div",null,"\u3010"+d(e.getCollectionDesc("aab301",r.aab301))+"\u3011"+d(r.chi031Desc),1),o("b",{style:X(l.tagStyle(r))},d(e.getCollectionDesc("chb00k",r.chb00k)),5)]),o("div",qe,[o("div",null,"\u7533\u62A5\u65F6\u95F4\uFF1A"+d(l.getDateFormatted(r.aae036,"yyyy-MM-DD")),1),o("div",null,"\u5DF2\u6838\u5B9A\u6276\u6301\u91D1\u989D\uFF1A"+d(r.aae019Formatted),1),o("div",null,"\u5F53\u524D\u73AF\u8282\uFF1A"+d(e.getCollectionDesc("cpb070",r.cse240)),1)]),o("div",Le,[o("button",{class:"primary",onClick:L=>l.showToReApply(r,!1),disabled:r.isCanCancel=="false"},"\u64A4\u9500\u7533\u62A5",8,Ae),o("button",{class:"primary",onClick:L=>l.toJudge(r.chi031)},"\u8BC4\u4EF7",8,Ue)])])]),default:m(()=>[o("div",Me,[_(n,{dataList:r.process?r.process.row:[]},null,8,["dataList"])])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1}),_($,{"current-page":s.pageInfo.pageNo,"onUpdate:current-page":a[1]||(a[1]=r=>s.pageInfo.pageNo=r),"page-size":s.pageInfo.pageSize,"onUpdate:page-size":a[2]||(a[2]=r=>s.pageInfo.pageSize=r),background:"",layout:"sizes, prev, pager, next, jumper",total:Number(s.pageInfo.total),"hide-on-single-page":!1,onSizeChange:l.pageSizeChange,onCurrentChange:l.pageNoChange,"page-sizes":["5","10","20","30"]},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),_(q,{modelValue:s.dialogVisible,"onUpdate:modelValue":a[5]||(a[5]=r=>s.dialogVisible=r),title:"\u63D0\u793A",width:"30%",onClose:l.closeToReApply},{footer:m(()=>[o("span",Qe,[_(C,{onClick:a[4]||(a[4]=r=>s.dialogVisible=!1)},{default:m(()=>[Oe]),_:1}),_(C,{type:"danger",onClick:l.toReApply},{default:m(()=>[f(d(s.reapplyFlag?"\u91CD\u65B0\u7533\u62A5":"\u64A4\u9500"),1)]),_:1},8,["onClick"])])]),default:m(()=>[o("b",{style:{"font-size":"20px"},onClick:a[3]||(a[3]=(...r)=>l.test&&l.test(...r))},[f(d(s.reapplyFlag?"\u786E\u8BA4\u91CD\u65B0\u7533\u62A5\uFF1F":""),1),Be,Ye])]),_:1},8,["modelValue","onClose"])])}var He=y(we,[["render",Ge]]);const Je={name:"EnterprisesRecordIndex",components:{Toolbar:pe,QueryResult:He},data(){return{type:null,staRefresh:0}},methods:{updateRecordType(e){this.type=e},updateStaRefresh(){this.staRefresh++}}},Ke={class:"enterprise-record"};function We(e,a,t,u,s,l){const n=V("Toolbar"),i=V("QueryResult");return c(),p("div",Ke,[_(n,{onUpdateRecordType:l.updateRecordType,staRefresh:s.staRefresh},null,8,["onUpdateRecordType","staRefresh"]),_(i,{type:s.type,onUpdateStaRefresh:l.updateStaRefresh},null,8,["type","onUpdateStaRefresh"])])}var ga=y(Je,[["render",We],["__scopeId","data-v-0a826774"]]);export{ga as default};
