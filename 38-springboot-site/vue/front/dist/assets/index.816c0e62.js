var R=Object.defineProperty,F=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var P=(e,i,t)=>i in e?R(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,b=(e,i)=>{for(var t in i||(i={}))H.call(i,t)&&P(e,t,i[t]);if(T)for(var t of T(i))z.call(i,t)&&P(e,t,i[t]);return e},k=(e,i)=>F(e,N(i));import{Y as $}from"./YhBreadcrumb.2e4fbba5.js";/* empty css             *//* empty css                  */import{_ as G}from"./YhTag.ca9f0289.js";import{i as A,a as E}from"./index.4c3bf3be.js";import{r as J}from"./requestGetVisitStatistics.52c119e6.js";import{h as m}from"./moment.08a7f518.js";import"./useGetCollectionDesc.6b6a7e16.js";import{u as K}from"./useMoment.3c281e5a.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";import{o as d,q as u,x as a,B as l,c as I,P as O,d as v,w as M,M as Q,s as L,v as q,A as y,C as Y,G as B,y as U,a as x}from"./vendor.94a1cd75.js";import{r as W}from"./requestC412.4f80f3d4.js";/* empty css                                                                 */var X="/assets/bg-policy-details-info.47e1b8ea.png";const Z={name:"PolicyDetailsInfo",props:{renderData:{type:[Object],required:!0,default:()=>{}},dateInfo:{type:[Object],required:!0,default:()=>{}},messageInfo:{type:[Object],required:!0,default:()=>{}}},data(){return{}},components:{YhTag:G},mounted(){this.userCodeTableMap("aab301"),this.userCodeTableMap("chi037"),this.userCodeTableMap("chi05a"),this.getVisitStatistics()},computed:{wrapperStyle(){let e="";return e+=`background-image: url(${X});`,e},bhi037Formatted(){return this.renderData.bhi037?m(this.renderData.bhi037).format("yyyy\u5E74MM\u6708DD\u65E5"):""}},methods:{toOnlineDeclaration(){const e=this.renderData.chi031;this.$router.push(`/apply/${e}`)},getVisitStatistics(){let e=this,{fullPath:i}=this.$route;J({visiturl:i}).then(t=>{e.renderData.visitCount=t.statistics.visitCount})},handleJumpRoute(e){this.$router.push(e)},useMoment:K},watch:{renderData:{handler(e){},immediate:!0}}},_=e=>(L("data-v-32a6d047"),e=e(),q(),e),ee={class:"name-wrapper"},te={class:"left"},ae={class:"city"},ie={class:"name"},se={key:0,class:"right"},oe={class:"cells"},ce={class:"cell"},ne=_(()=>a("div",{class:"key"},"\u53D1\u5E03\u65E5\u671F\uFF1A",-1)),de={class:"value"},le={class:"cell"},re=_(()=>a("div",{class:"key"},"\u4E3B\u7BA1\u90E8\u95E8\uFF1A",-1)),he={class:"value"},_e={class:"cell"},ue=_(()=>a("div",{class:"key"},"\u653F\u7B56\u7EA7\u522B\uFF1A",-1)),fe={class:"value"},pe={class:"cell"},me=_(()=>a("div",{class:"key"},"\u8054\u7CFB\u4EBA\uFF1A",-1)),ve={class:"value"},ye={class:"cell"},be=_(()=>a("div",{class:"key"},"\u8054\u7CFB\u7535\u8BDD\uFF1A",-1)),Ie={class:"value"},De={class:"cell"},ge=_(()=>a("div",{class:"key"},"\u6D4F\u89C8\u91CF\uFF1A",-1)),ke={class:"value"},Ce={class:"cell",style:{width:"100%"}},Me=_(()=>a("div",{class:"key"},"\u653F\u7B56\u4F9D\u636E\uFF1A",-1)),xe={class:"value"},we={class:"apply"},Se={key:0,class:"tip"},je=y("\u7533\u62A5\u7ED3\u675F\u5012\u8BA1\u65F6"),Te={style:{padding:"0 5px",color:"red"}},Pe=y("\u5929"),$e={key:1,class:"tip",style:{"font-weight":"bold"}},Ge=y("\u7ACB\u5373\u7533\u62A5");function Oe(e,i,t,f,o,s){const n=G,h=Y;return d(),u("div",{class:"policy-details-info",style:Q(s.wrapperStyle)},[a("div",ee,[a("div",te,[a("div",ae,"\u3010"+l(t.renderData.aab301?e.getCollectionDesc("aab301",t.renderData.aab301):t.renderData.aab301)+"\u3011",1),a("div",ie,l(t.renderData.chi032),1)]),(d(),u("div",se,[t.messageInfo.hasHr08=="1"?(d(),I(n,{key:0,label:"\u7CFB\u7EDF\u63A8\u8350\u7533\u62A5",color:"112,182,3",borderRadius:"4px",width:"112px",height:"40px",border:"",style:{cursor:"pointer"},title:"\u6709\u6D88\u606F",onClick:i[0]||(i[0]=p=>s.handleJumpRoute("/enterprises/message"))})):O("",!0),t.messageInfo.hasHr09=="1"?(d(),I(n,{key:1,label:"\u4E3B\u7BA1\u90E8\u95E8\u9080\u8BF7\u7533\u62A5",color:"112,182,3",borderRadius:"4px",width:"112px",height:"40px",border:"",style:{cursor:"pointer"},title:"\u6709\u6D88\u606F",onClick:i[1]||(i[1]=p=>s.handleJumpRoute("/enterprises/message"))})):O("",!0)]))]),a("div",oe,[a("div",ce,[ne,a("div",de,l(s.useMoment(t.renderData.chi052,"YYYY-MM-DD")),1)]),a("div",le,[re,a("div",he,l(e.getCollectionDesc("chi037",t.renderData.chi037)),1)]),a("div",_e,[ue,a("div",fe,l(e.getCollectionDesc("chi05a",t.renderData.chi034)),1)]),a("div",pe,[me,a("div",ve,l(t.renderData.chi04p),1)]),a("div",ye,[be,a("div",Ie,l(t.renderData.chi04q),1)]),a("div",De,[ge,a("div",ke,l(t.renderData.visitCount),1)]),a("div",Ce,[Me,a("div",xe,l(t.renderData.chi05c+"\xA0\xA0\xA0"+t.renderData.chi051),1)])]),a("div",we,[t.dateInfo.overdue?(d(),u("div",$e,"\u7533\u62A5\u65F6\u95F4\u5DF2\u7ED3\u675F")):(d(),u("div",Se,[je,a("b",Te,l(t.dateInfo.limitDays),1),Pe])),v(h,{onClick:s.toOnlineDeclaration,type:"primary",disabled:!t.dateInfo.enableDeclare},{default:M(()=>[Ge]),_:1},8,["onClick","disabled"])])],4)}var Le=C(Z,[["render",Oe],["__scopeId","data-v-32a6d047"]]);const qe={name:"PolicyDetailsTabs",props:{policyInfo:{type:[Object],required:!0,default:()=>{}}},data(){return{isChecked:0}},components:{},mounted(){this.handleChecked()},methods:{handleChecked(){let{fullPath:e}=this.$route;console.log(e);let i=e.indexOf("match-report"),t=e.indexOf("service-guide");this.$nextTick(()=>{i!==-1&&(this.isChecked=0),t!==-1&&(this.isChecked=1)})},handleTabChange(e){let i=this;this.isChecked!=e&&(e==0&&this.$router.push("/policy/details/match-report/"+i.$route.params.id),e==1&&this.$router.push("/policy/details/service-guide/"+i.$route.params.id),this.isChecked=e)},downloadOriginalPolicy(){A(this.policyInfo.oraFile,"0")}},computed:{}},D=e=>(L("data-v-7dd56e80"),e=e(),q(),e),Ye={class:"policy-details-tabs"},Be={class:"left"},Ve=D(()=>a("i",{class:"iconfont iconfont-pipeibaogao"},null,-1)),Re=D(()=>a("div",null,"\u5339\u914D\u62A5\u544A",-1)),Fe=[Ve,Re],Ne=D(()=>a("i",{class:"iconfont iconfont-banshizhinan"},null,-1)),He=D(()=>a("div",null,"\u7533\u62A5\u6307\u5357",-1)),ze=[Ne,He],Ae={class:"right"},Ee=y("\u653F\u7B56\u539F\u6587"),Je=y("\u653F\u7B56\u539F\u6587");function Ke(e,i,t,f,o,s){const n=Y;return d(),u("div",Ye,[a("div",Be,[a("div",{class:B(["tab-item",{checked:o.isChecked==0}]),onClick:i[0]||(i[0]=h=>s.handleTabChange(0))},Fe,2),a("div",{class:B(["tab-item",{checked:o.isChecked==1}]),onClick:i[1]||(i[1]=h=>s.handleTabChange(1))},ze,2)]),a("div",Ae,[t.policyInfo&&t.policyInfo.oraFile?(d(),I(n,{key:0,onClick:s.downloadOriginalPolicy,class:"primary"},{default:M(()=>[Ee]),_:1},8,["onClick"])):(d(),I(n,{key:1,type:"primary",disabled:"true"},{default:M(()=>[Je]),_:1}))])])}var Qe=C(qe,[["render",Ke],["__scopeId","data-v-7dd56e80"]]);const Ue={name:"PolicyDetails",data(){return{breadcrumbData:[{id:"01",path:"/policy",name:"\u653F\u7B56\u76F4\u901A\u8F66"},{id:"02",path:"",name:"\u653F\u7B56\u8BE6\u60C5"}],renderData:{},dateInfo:{limitDays:"",overdue:!1,enableDeclare:!1},policyInfo:{},messageInfo:{},indexServiceGuideInfo:{basicInfo:{},conditionInfo:{},materialsInfo:{},attachmentInfo:{}}}},provide(){return{serviceGuideProvide:this.getServiceGuideInfo}},mounted(){this.getPolicyDetails()},methods:{getPolicyDetails(){let e=this;if(e.$route.params.id){const{aab001:i}=this.corporateInfo;W(e.$route.params.id,i).then(t=>{if(t.code=="200"){let o=[];if(t.data.he26List.map(c=>{o.push(c.che262)}),e.renderData=k(b({},e.renderData),{chi031:t.data.hi03Map.chi031,aab301:t.data.hi03Map.aab301,chi032:t.data.hi03Map.chi032,chi05c:t.data.hi05Map.chi05c,chi034:t.data.hi03Map.chi034,chi052:t.data.hi05Map.chi052,chi037:t.data.hi03Map.chi037,chi051:t.data.hi05Map.chi051,bhi037:t.data.hi03Map.bhi037,chi04p:t.data.hi03Map.chi04p,chi04q:t.data.hi03Map.chi04q,policyType:o.join("\u3001")}),t.data.hi03Map.bhi036){let c=m(m(t.data.hi03Map.bhi036).format("yyyy-MM-DD")),r=m(m(new Date).format("yyyy-MM-DD")),j=c.diff(r);j>=0?(e.dateInfo.limitDays=Math.ceil(j/(24*60*60*1e3)+1),e.dateInfo.overdue=!1,e.dateInfo.enableDeclare=!0):(e.dateInfo.overdue=!0,e.dateInfo.enableDeclare=!1)}else e.dateInfo.overdue=!0,e.dateInfo.enableDeclare=!1;const{hi23List:s}=t.data;let n;for(var f in s)if(s[f].chi238==4){n=s[f].chi215;break}e.policyInfo={oraFile:n};const{hasHr08:h,hasHr09:p}=t.data;e.messageInfo={hasHr08:h,hasHr09:p},e.indexServiceGuideInfo.basicInfo=k(b({},t.data.hi03Map),{he24List:t.data.he24List,hi01List:t.data.hi01List}),e.indexServiceGuideInfo.conditionInfo=t.data.hr02List;let g=t.data.he10List,V=t.data.he09List,w={};g.map(c=>{V.map(r=>{c.che092==r.che092&&(w[c.che092]={che091:r.che091,che093:r.che093,che094:r.che094,che09a:c.che09a,che09b:r.che09b,che099:r.che099})})}),e.indexServiceGuideInfo.materialsInfo=Object.values(w);let S=[];t.data.hi23List.map(c=>{S.push({chi230:c.chi230,chi231:c.chi231,chi233:c.chi233,chi215:c.chi215})}),e.indexServiceGuideInfo.attachmentInfo=S}else e.$message.warning("\u83B7\u53D6\u653F\u7B56\u4FE1\u606F\u5931\u8D25\uFF01")})}},getServiceGuideInfo(){return this.indexServiceGuideInfo}},components:{YhBreadcrumb:$,PolicyDetailsInfo:Le,Tabs:Qe},computed:b({},U([E]))},We={class:"policy-details"},Xe={class:"container"},Ze={class:"tab-wrapper"};function et(e,i,t,f,o,s){const n=$,h=x("PolicyDetailsInfo"),p=x("Tabs"),g=x("router-view");return d(),u("div",We,[a("div",Xe,[v(n,{renderData:o.breadcrumbData},null,8,["renderData"]),v(h,{renderData:o.renderData,dateInfo:o.dateInfo,messageInfo:o.messageInfo},null,8,["renderData","dateInfo","messageInfo"]),a("div",Ze,[v(p,{policyInfo:o.policyInfo},null,8,["policyInfo"]),v(g)])])])}var pt=C(Ue,[["render",et],["__scopeId","data-v-93decf90"]]);export{pt as default};
